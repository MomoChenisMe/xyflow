/**
 * Angular XYFlow 樣式入口文件
 * 
 * 這是 Angular XYFlow 的主要樣式入口，導入所有必要的樣式文件
 * 確保樣式的正確加載順序和主題系統的正常工作
 */

/* ===================
   核心樣式系統
   =================== */

/* 1. CSS 變量定義 - 必須首先加載 */
@import './variables.css';

/* 2. 基礎樣式 - 核心組件樣式 */
@import './base.css';

/* 3. 組件樣式 - 特殊組件樣式 */
@import './components.css';

/* 4. 完整樣式集成 - React Flow 兼容樣式 */
@import './xyflow.css';

/* ===================
   全局樣式重置
   =================== */

/* 確保盒模型一致性 */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/* 清除默認邊距和內邊距 */
body,
html {
  margin: 0;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif;
}

/* ===================
   Angular 全局樣式
   =================== */

/* Angular 應用根樣式 */
app-root {
  display: block;
  width: 100%;
  height: 100vh;
}

/* Angular 路由出口樣式 */
router-outlet + * {
  display: block;
  width: 100%;
  height: 100%;
}

/* ===================
   實用工具類
   =================== */

/* 隱藏元素 */
.sr-only,
.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* 取消隱藏（用於聚焦時顯示） */
.sr-only-focusable:focus,
.visually-hidden-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  padding: initial;
  margin: initial;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* 清除浮動 */
.clearfix::after {
  content: "";
  display: table;
  clear: both;
}

/* 響應式圖片 */
.img-responsive {
  max-width: 100%;
  height: auto;
}

/* 文本工具類 */
.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }
.text-nowrap { white-space: nowrap; }
.text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* 顯示/隱藏工具類 */
.d-none { display: none !important; }
.d-block { display: block !important; }
.d-inline { display: inline !important; }
.d-inline-block { display: inline-block !important; }
.d-flex { display: flex !important; }
.d-inline-flex { display: inline-flex !important; }

/* Flexbox 工具類 */
.justify-content-start { justify-content: flex-start !important; }
.justify-content-end { justify-content: flex-end !important; }
.justify-content-center { justify-content: center !important; }
.justify-content-between { justify-content: space-between !important; }
.justify-content-around { justify-content: space-around !important; }

.align-items-start { align-items: flex-start !important; }
.align-items-end { align-items: flex-end !important; }
.align-items-center { align-items: center !important; }
.align-items-baseline { align-items: baseline !important; }
.align-items-stretch { align-items: stretch !important; }

.flex-direction-row { flex-direction: row !important; }
.flex-direction-column { flex-direction: column !important; }
.flex-wrap { flex-wrap: wrap !important; }
.flex-nowrap { flex-wrap: nowrap !important; }

/* 邊距工具類 */
.m-0 { margin: 0 !important; }
.m-1 { margin: 0.25rem !important; }
.m-2 { margin: 0.5rem !important; }
.m-3 { margin: 1rem !important; }
.m-4 { margin: 1.5rem !important; }
.m-5 { margin: 3rem !important; }

.mt-0 { margin-top: 0 !important; }
.mt-1 { margin-top: 0.25rem !important; }
.mt-2 { margin-top: 0.5rem !important; }
.mt-3 { margin-top: 1rem !important; }
.mt-4 { margin-top: 1.5rem !important; }
.mt-5 { margin-top: 3rem !important; }

.mb-0 { margin-bottom: 0 !important; }
.mb-1 { margin-bottom: 0.25rem !important; }
.mb-2 { margin-bottom: 0.5rem !important; }
.mb-3 { margin-bottom: 1rem !important; }
.mb-4 { margin-bottom: 1.5rem !important; }
.mb-5 { margin-bottom: 3rem !important; }

.ml-0 { margin-left: 0 !important; }
.ml-1 { margin-left: 0.25rem !important; }
.ml-2 { margin-left: 0.5rem !important; }
.ml-3 { margin-left: 1rem !important; }
.ml-4 { margin-left: 1.5rem !important; }
.ml-5 { margin-left: 3rem !important; }

.mr-0 { margin-right: 0 !important; }
.mr-1 { margin-right: 0.25rem !important; }
.mr-2 { margin-right: 0.5rem !important; }
.mr-3 { margin-right: 1rem !important; }
.mr-4 { margin-right: 1.5rem !important; }
.mr-5 { margin-right: 3rem !important; }

/* 內邊距工具類 */
.p-0 { padding: 0 !important; }
.p-1 { padding: 0.25rem !important; }
.p-2 { padding: 0.5rem !important; }
.p-3 { padding: 1rem !important; }
.p-4 { padding: 1.5rem !important; }
.p-5 { padding: 3rem !important; }

.pt-0 { padding-top: 0 !important; }
.pt-1 { padding-top: 0.25rem !important; }
.pt-2 { padding-top: 0.5rem !important; }
.pt-3 { padding-top: 1rem !important; }
.pt-4 { padding-top: 1.5rem !important; }
.pt-5 { padding-top: 3rem !important; }

.pb-0 { padding-bottom: 0 !important; }
.pb-1 { padding-bottom: 0.25rem !important; }
.pb-2 { padding-bottom: 0.5rem !important; }
.pb-3 { padding-bottom: 1rem !important; }
.pb-4 { padding-bottom: 1.5rem !important; }
.pb-5 { padding-bottom: 3rem !important; }

.pl-0 { padding-left: 0 !important; }
.pl-1 { padding-left: 0.25rem !important; }
.pl-2 { padding-left: 0.5rem !important; }
.pl-3 { padding-left: 1rem !important; }
.pl-4 { padding-left: 1.5rem !important; }
.pl-5 { padding-left: 3rem !important; }

.pr-0 { padding-right: 0 !important; }
.pr-1 { padding-right: 0.25rem !important; }
.pr-2 { padding-right: 0.5rem !important; }
.pr-3 { padding-right: 1rem !important; }
.pr-4 { padding-right: 1.5rem !important; }
.pr-5 { padding-right: 3rem !important; }

/* ===================
   響應式工具類
   =================== */

/* 小屏設備 (≥576px) */
@media (min-width: 576px) {
  .d-sm-none { display: none !important; }
  .d-sm-block { display: block !important; }
  .d-sm-flex { display: flex !important; }
}

/* 中等設備 (≥768px) */
@media (min-width: 768px) {
  .d-md-none { display: none !important; }
  .d-md-block { display: block !important; }
  .d-md-flex { display: flex !important; }
}

/* 大型設備 (≥992px) */
@media (min-width: 992px) {
  .d-lg-none { display: none !important; }
  .d-lg-block { display: block !important; }
  .d-lg-flex { display: flex !important; }
}

/* 超大設備 (≥1200px) */
@media (min-width: 1200px) {
  .d-xl-none { display: none !important; }
  .d-xl-block { display: block !important; }
  .d-xl-flex { display: flex !important; }
}

/* ===================
   主題特定的全局樣式
   =================== */

/* 亮色主題全局樣式 */
:root {
  color-scheme: light;
}

/* 暗色主題全局樣式 */
:root.dark {
  color-scheme: dark;
}

/* 系統主題跟隨 */
@media (prefers-color-scheme: dark) {
  :root.system {
    color-scheme: dark;
  }
}

/* ===================
   打印樣式
   =================== */

@media print {
  /* 隱藏不必要的元素 */
  .xy-flow__controls,
  .xy-flow__minimap,
  .xy-flow__panel {
    display: none !important;
  }
  
  /* 確保流程圖可見 */
  .xy-flow,
  .react-flow {
    background: white !important;
    -webkit-print-color-adjust: exact;
    color-adjust: exact;
  }
  
  /* 節點和邊線樣式調整 */
  .xy-flow__node,
  .react-flow__node {
    border: 1px solid #000 !important;
    background: white !important;
    color: black !important;
  }
  
  .xy-flow__edge path,
  .react-flow__edge path {
    stroke: #000 !important;
    stroke-width: 2 !important;
  }
}

/* ===================
   開發和調試樣式
   =================== */

/* 開發模式輔助樣式 */
[data-dev-mode="true"] .xy-flow__node {
  border: 2px dashed red !important;
}

[data-dev-mode="true"] .xy-flow__edge path {
  stroke: blue !important;
  stroke-width: 3px !important;
}

[data-dev-mode="true"] .xy-flow__handle {
  border: 2px solid green !important;
  background: lime !important;
}

/* 調試信息樣式 */
.debug-info {
  position: fixed;
  top: 10px;
  right: 10px;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 10px;
  border-radius: 4px;
  font-family: monospace;
  font-size: 12px;
  z-index: 9999;
}

.debug-info pre {
  margin: 0;
  white-space: pre-wrap;
}

/* ===================
   無障礙功能增強
   =================== */

/* 高對比度模式增強 */
@media (prefers-contrast: high) {
  .xy-flow__node,
  .react-flow__node {
    border-width: 3px !important;
  }
  
  .xy-flow__edge path,
  .react-flow__edge path {
    stroke-width: 3px !important;
  }
  
  .xy-flow__handle,
  .react-flow__handle {
    border-width: 3px !important;
  }
}

/* 減少動畫偏好 */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* 聚焦指示器增強 */
.xy-flow :focus-visible {
  outline: 3px solid #005fcc;
  outline-offset: 2px;
}

/* 跳過鏈接 */
.skip-link {
  position: absolute;
  left: -10000px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

.skip-link:focus {
  position: static;
  width: auto;
  height: auto;
  background: #000;
  color: #fff;
  padding: 8px 16px;
  text-decoration: none;
  z-index: 10000;
}